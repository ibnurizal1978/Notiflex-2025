<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/assets/css/simplebar.css">
  <link href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/feather.css">
  <link rel="stylesheet" href="/assets/css/daterangepicker.css">
  <link rel="stylesheet" href="/assets/css/app-light.css" id="lightTheme">
</head>

<body class="light ">
  <div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="wrapper w-100">
      <div class="row">
        <div class="col-12">
          <form class="col-lg-3 col-md-4 col-10 mx-auto text-center" method="POST" action="/login">
            <a class="navbar-brand mx-auto mt-2 flex-fill text-center" href="./index.html">
              <svg version="1.1" id="logo" class="navbar-brand-img brand-md" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 120 120" xml:space="preserve">
                <g>
                  <polygon class="st0" points="78,105 15,105 24,87 87,87 	" />
                  <polygon class="st0" points="96,69 33,69 42,51 105,51 	" />
                  <polygon class="st0" points="78,33 15,33 24,15 87,15 	" />
                </g>
              </svg>
            </a>
            <h1 class="h6 mb-3">Sign in</h1>
 
            <% if (typeof error !== 'undefined' && error) { %>
              <div class="alert alert-danger" role="alert">
                <%= error %>
              </div>
            <% } %>

            <% if (typeof message !== 'undefined' && message) { %>
              <div class="alert alert-success" role="alert">
                <%= message %>
              </div>
            <% } %>

            <div class="form-group">
              <label for="inputEmail" class="sr-only">Email address</label>
              <input type="email" id="inputEmail" name="email" class="form-control form-control-lg" placeholder="Email address" required autofocus>
            </div>
            <div class="form-group">
              <label for="inputPassword" class="sr-only">Password</label>
              <input type="password" id="inputPassword" name="password" class="form-control form-control-lg" placeholder="Password" required>
            </div>
            <button type="submit" class="btn btn-primary  btn-block">Login</button>
            <div class="d-flex align-items-center my-3">
              <hr class="flex-grow-1 me-2" />
              <span>or login with</span>
              <hr class="flex-grow-1 ms-2" />
            </div>
            <a href="/auth/google" class="btn btn-outline-danger w-100 mb-3">
              <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" style="width:20px; margin-right:8px; vertical-align:middle;"> Login with Google
            </a>
            <a href="/forgot-password" class="btn btn-link">Forgot password?</a>
            <p class="mt-3">Don't have an account? <a href="/signup">Sign up</a></p>
            <p class="mt-5 mb-3 text-muted">Â© 2020</p>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/popper.min.js"></script>
  <script src="/assets/js/moment.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/simplebar.min.js"></script>
  <script src="/assets/js/tinycolor-min.js"></script>
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/apps.js"></script>
  <script>
    // Jika URL mengandung #access_token, ambil dan redirect ke /auth/callback
    (function() {
      if (window.location.hash && window.location.hash.includes('access_token=')) {
        const params = new URLSearchParams(window.location.hash.substring(1));
        const accessToken = params.get('access_token');
        if (accessToken) {
          window.location.href = '/auth/callback?access_token=' + accessToken;
        }
      }
    })();
  </script>
</body>
</html> 